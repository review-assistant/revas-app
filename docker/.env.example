############################################################
# Revas Docker Deployment Configuration
############################################################
# Copy this file to .env and update the values for your environment.
# IMPORTANT: Generate new secrets for production - do not use defaults!

############################################################
# URLs - Update for your deployment
############################################################

# Public URL where the frontend will be accessed
SITE_URL=http://localhost

# Supabase API URL (Kong gateway) - used by frontend
# This is baked into the frontend build, so rebuild after changing
API_EXTERNAL_URL=http://localhost:8000

############################################################
# Comment Service Backend
############################################################

# URL of the external comment service API
# Use host.docker.internal for services running on the Docker host
# Or use the actual IP/hostname if running elsewhere
COMMENT_SERVICE_URL=http://host.docker.internal:8888

############################################################
# Secrets - MUST CHANGE FOR PRODUCTION
############################################################

# PostgreSQL password - change from default!
POSTGRES_PASSWORD=your-super-secret-postgres-password

# JWT Secret - minimum 32 characters, used to sign all tokens
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters

# Anon Key - Public JWT token for anonymous access
# Generate using the JWT_SECRET above with role=anon
# Online tool: https://jwt.io/
# Payload: {"role":"anon","iss":"supabase","iat":<timestamp>,"exp":<timestamp+10years>}
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzM0ODQ4MDAwLCJleHAiOjE4OTI2MTQ0MDB9.CHANGE_THIS_TOKEN

# Service Role Key - Secret JWT token for admin/service access
# Generate using the JWT_SECRET above with role=service_role
# Payload: {"role":"service_role","iss":"supabase","iat":<timestamp>,"exp":<timestamp+10years>}
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3MzQ4NDgwMDAsImV4cCI6MTg5MjYxNDQwMH0.CHANGE_THIS_TOKEN

# Realtime secret key base
# Generate with: openssl rand -base64 48
REALTIME_SECRET=your-realtime-secret-key-base-change-this

# Encryption key for review content (used in database functions)
# Must also be updated in the database migration if changing
ENCRYPTION_KEY=your-production-encryption-key

############################################################
# JWT Configuration
############################################################

# JWT token expiry in seconds (default: 1 hour)
JWT_EXPIRY=3600

############################################################
# Port Configuration (optional - defaults shown)
############################################################

# Kong API gateway port
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

# PostgreSQL port (only expose if needed for external access)
POSTGRES_PORT=5432

# Supabase Studio admin UI port
STUDIO_PORT=3000

############################################################
# Email Configuration (optional)
############################################################

# SMTP settings for sending emails (password reset, etc.)
# Leave empty to disable email sending
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_ADMIN_EMAIL=admin@localhost

# Additional redirect URLs for OAuth (comma-separated)
ADDITIONAL_REDIRECT_URLS=

############################################################
# Instructions for Generating JWT Tokens
############################################################
#
# 1. Choose your JWT_SECRET (min 32 chars)
#
# 2. Generate ANON_KEY:
#    Header: {"alg":"HS256","typ":"JWT"}
#    Payload: {
#      "role": "anon",
#      "iss": "supabase",
#      "iat": 1734848000,
#      "exp": 1892614400
#    }
#    Sign with your JWT_SECRET using HS256
#
# 3. Generate SERVICE_ROLE_KEY:
#    Same as above but with "role": "service_role"
#
# Quick generation using Node.js:
#   const jwt = require('jsonwebtoken');
#   const secret = 'your-jwt-secret';
#   const anon = jwt.sign({role:'anon',iss:'supabase'}, secret, {expiresIn:'10y'});
#   const service = jwt.sign({role:'service_role',iss:'supabase'}, secret, {expiresIn:'10y'});
#
############################################################
